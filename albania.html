<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Radio Zeno Player Love_my_Heart con MP4</title>
<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background: ;
  font-family:Segoe UI,Arial,sans-serif;
  color:white;
  overflow:hidden;
}

/* LUCI BLU DI SFONDO */
body::before,
body::after{
  content:"";
  position:fixed;
  width:400px;
  height:400px;
  background:radial-gradient(circle, rgba(0,160,255,.35), transparent 70%);
  filter:blur(60px);
  animation:moveLight 12s linear infinite;
}
body::after{
  animation-delay:6s;
  top:60%;
  left:60%;
}
@keyframes moveLight{
  0%{ transform:translate(0,0); }
  50%{ transform:translate(-120px,80px); }
  100%{ transform:translate(0,0); }
}

/* CONTENITORE TOTALE */
#layout{
  width:650px;
  height:484px;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CONTENITORI VIDEO LATERALI */
.video-container{
  position:absolute;
  top:20px;
  width:200px;
  height:444px;
}
#leftContainer{ left:-120px; }
#rightContainer{ right:-120px; }

.side-video{
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0.9;
  pointer-events:none;
  border:4px solid #0ff;
  box-shadow:0 0 15px #0ff,0 0 30px #fff inset;
}

/* TESTO FERMO DENTRO VIDEO */
.video-text{
  position:absolute;
  bottom:15px;
  width:100%;
  text-align:center;
  font-size:28px;
  font-weight:bold;
  color:#00ffff;
  text-shadow:0 0 10px #00ffff,0 0 20px #fff;
  pointer-events:none;
}

/* PLAYER CENTRALE */
.player{
  position:relative;
  width:370px;
  height:100%;
  padding:25px;
  border-radius:22px;
  background: linear-gradient(135deg, rgba(0,200,255,0.8), rgba(255,255,255,0.5));
  backdrop-filter:blur(0px);
  border: 2px solid rgba(0,255,255,0.6);
  box-shadow:
    0 0 25px rgba(0,140,255,.6),
    0 0 60px rgba(0,140,255,.4),
    0 0 30px rgba(0,255,255,0.7);
  text-align:center;
  z-index:2;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:15px;
}

/* COVER FERMA */
.cover{
  width:180px;
  height:180px;
  border-radius:50%;
  overflow:hidden;
  border:4px solid rgba(0,200,255,.8);
  box-shadow:0 0 25px rgba(0,160,255,.9), inset 0 0 20px rgba(0,160,255,.6);
  z-index:10;
}
.cover img{
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:11;
}

/* SCROLLER */
.scroller{
  width:100%;
  overflow:hidden;
  white-space:nowrap;
  margin:15px 0 25px;
}
.scroll-text{
  display:inline-block;
  padding-left:100%;
  font-size:1.3em;
  font-weight:700;
  background:linear-gradient(270deg,#00ccff,#00ffea,#4d8dff,#8b5cff,#00ccff);
  background-size:600% 600%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:scroll 14s linear infinite, rainbow 6s linear infinite;
  filter:drop-shadow(0 0 8px rgba(0,200,255,.9));
}
@keyframes scroll{
  from{ transform:translateX(0); }
  to{ transform:translateX(-100%); }
}
@keyframes rainbow{
  0%{ background-position:0% 50%; }
  50%{ background-position:100% 50%; }
  100%{ background-position:0% 50%; }
}

/* CONTROLLI ORIZZONTALI CON SLIDER */
.controls{
  display:flex;
  align-items:center;
  justify-content:space-between; /* play sx, volume centro, stop dx */
  gap:15px;
  background: linear-gradient(90deg, rgba(0,180,255,0.2), rgba(0,100,255,0.2));
  padding:10px 15px;
  border-radius:20px;
  box-shadow:0 0 20px rgba(0,200,255,0.5);
  width:100%;
}

.controls button{
  background:linear-gradient(90deg, #00f, #0ff);
  border:none;
  border-radius:50%;
  width:50px;
  height:50px;
  color:white;
  font-size:1.8em;
  cursor:pointer;
  box-shadow:0 0 10px #0ff,0 0 20px #00f;
  transition: transform .2s, box-shadow .2s;
}

.volume{
  flex:1;
  display:flex;
  justify-content:center;
  margin:0 15px;
}
input[type=range]{
  width:100%;
  accent-color:#00aaff;
  border-radius:10px;
}

/* STATUS ARCORALE */
.status{
  font-size:1em;
  font-weight:700;
  margin-top:12px;
  background: linear-gradient(270deg, #00ffff,#33ccff,#00aaff,#0066ff,#33ccff);
  background-size:600% 600%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:rainbow 6s linear infinite;
  filter:drop-shadow(0 0 8px rgba(0,255,255,0.9));
}
</style>
</head>
<body>
<div id="layout">

  <!-- MP4 SINISTRA -->
  <div id="leftContainer" class="video-container">
    <video id="leftVideo" class="side-video" autoplay loop muted playsinline>
      <source src="https://peppeagosto.github.io/immaggini/alby2.mp4" type="video/mp4">
    </video>
    <div class="video-text">mirë se vini</div>
  </div>

  <!-- MP4 DESTRA -->
  <div id="rightContainer" class="video-container">
    <video id="rightVideo" class="side-video" autoplay loop muted playsinline>
      <source src="https://peppeagosto.github.io/immaggini/alby2.mp4" type="video/mp4">
    </video>
    <div class="video-text">mirë se vini</div>
  </div>

  <!-- PLAYER CENTRALE -->
  <div class="player">
    <div class="cover">
      <img id="coverArt" src="https://xatimg.com/image/bP423qrrb5Rg.jpg">
    </div>
    <div class="scroller">
      <div class="scroll-text" id="scrollText">In attesa metadata…</div>
    </div>
    <div class="controls">
      <button id="playBtn">▶️</button>
      <div class="volume">
        <input type="range" id="volume" min="0" max="1" step="0.01" value="0.8">
      </div>
      <button id="stopBtn">⏹️</button>
    </div>
    <div class="status">Love_my_Heart</div>
  </div>

</div>

<audio id="audio" crossorigin="anonymous"></audio>

<script>
const audio = document.getElementById("audio");
const playBtn = document.getElementById("playBtn");
const stopBtn = document.getElementById("stopBtn");
const volume = document.getElementById("volume");
const scrollText = document.getElementById("scrollText");
const coverArt = document.getElementById("coverArt");

const FALLBACK_COVER = "https://xatimg.com/image/bP423qrrb5Rg.jpg";
const STREAM_URL = "https://stream.zeno.fm/qs3aarshmtzuv";
const API_URL = "https://api.zeno.fm/mounts/metadata/subscribe/qs3aarshmtzuv";

let playing=false;
audio.src=STREAM_URL;
audio.volume=volume.value;

/* CONTROLLI */
playBtn.onclick=()=>{
  if(!playing){
    audio.play().catch(()=>{});
    playBtn.textContent="⏸️";
    playing=true;
  }else{
    audio.pause();
    playBtn.textContent="▶️";
    playing=false;
  }
};
stopBtn.onclick=()=>{
  audio.pause();
  audio.currentTime=0;
  playBtn.textContent="▶️";
  playing=false;
};
volume.oninput=()=>audio.volume=volume.value;

/* METADATA CON PROXY CORS */
function connectMetadata(){
  const es=new EventSource(API_URL);
  es.onmessage=e=>{
    const data=JSON.parse(e.data);
    if(!data.streamTitle) return;
    scrollText.textContent=data.streamTitle;

    const deezerURL = `https://api.deezer.com/search?q=${encodeURIComponent(data.streamTitle)}&limit=1`;

    fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(deezerURL)}`)
    .then(r=>r.json())
    .then(d=>{
      const json = JSON.parse(d.contents);
      if(json.data && json.data[0]?.album?.cover_big){
        coverArt.src = json.data[0].album.cover_big;
      } else {
        coverArt.src = FALLBACK_COVER;
      }
    })
    .catch(()=> coverArt.src = FALLBACK_COVER);
  };
}
connectMetadata();
</script>
</body>
</html>

