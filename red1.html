<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>dxsx_offuscato_fix_mp4</title>
</head>
<body style="margin:0;padding:0;background:transparent;overflow:hidden;">
<script>
/* OFFUSCATO - genera CSS + DOM per 2 video left/right (transparent background) - FIX autoplay/play */
(function(){
  try{
    // CSS principale
    var cssFinal = "body,html{margin:0;padding:0;height:100vh;background:transparent;display:flex;justify-content:center;align-items:center;overflow:hidden;}" +
      ".container{position:relative;width:1308px;height:486px}" +
      "video.side-video{position:absolute;top:0;width:290px;height:486px;object-fit:cover;border-radius:10px;box-shadow:0 0 15px rgba(255,255,255,0.3);z-index:1}" +
      ".left-video{left:-40px}.right-video{right:-40px}";
    var s = document.createElement('style');
    s.type = 'text/css';
    s.appendChild(document.createTextNode(cssFinal));
    document.head.appendChild(s);

    // helper per creare elementi
    function X(tag, attrs, parent){
      var e = document.createElement(tag);
      if(attrs){
        for(var k in attrs){
          if(!attrs.hasOwnProperty(k)) continue;
          try{ 
            e.setAttribute(k, attrs[k]);
            if(k === 'autoplay') e.autoplay = true;
            if(k === 'loop') e.loop = true;
            if(k === 'muted') e.muted = true;
            if(k === 'playsinline') { e.playsInline = true; e.setAttribute('webkit-playsinline',''); }
          }catch(_){}
        }
      }
      (parent||document.body).appendChild(e);
      return e;
    }

    // container
    var cont = X('div', {'class':'container'}, document.body);

    // funzione che crea video
    function makeVideo(cls, src){
      var v = X('video', {'class': cls, 'autoplay':'', 'loop':'', 'muted':'', 'playsinline':''}, cont);
      try{ v.autoplay = true; v.loop = true; v.muted = true; v.playsInline = true; v.setAttribute('webkit-playsinline',''); }catch(_){}
      var srcEl = X('source', {'src': src, 'type':'video/mp4'}, v);
      v.appendChild(document.createTextNode('Il tuo browser non supporta il video.'));
      try{
        v.load();
        setTimeout(function(){
          var p = v.play();
          if(p && p.then) p.then(function(){ }).catch(function(e){});
        },120);
      }catch(e){}
      return v;
    }

    // crea i due video laterali
    var url = 'https://peppeagosto.github.io/immaggini/red1.mp4';
    var leftV = makeVideo('side-video left-video', url);
    var rightV = makeVideo('side-video right-video', url);

    // aggiunge glow accecante solo ai bordi dei due video
    [leftV, rightV].forEach(v => {
      v.style.boxShadow = "0 0 25px #ff0000, 0 0 50px #ff6600, 0 0 75px #ff00ff";
    });

    // centro & layout
    document.documentElement.style.background = 'transparent';
    document.body.style.display = 'flex';
    document.body.style.justifyContent = 'center';
    document.body.style.alignItems = 'center';
    document.body.style.height = '100vh';

    // anti-copy
    document.onselectstart = function(){ return false; };
    document.ondragstart = function(){ return false; };

    // anti-dump toString (temporaneo)
    try{
      var _p = Function.prototype.toString;
      Function.prototype.toString = function(){ return '/* code protected */'; };
      setTimeout(function(){ Function.prototype.toString = _p; }, 1500);
    }catch(e){}

  }catch(err){
    var m = document.createElement('div');
    m.style.cssText = 'position:fixed;left:0;top:0;padding:8px;background:rgba(0,0,0,0.6);color:#fff;font-family:Arial,sans-serif;';
    m.appendChild(document.createTextNode('Err:'+ (err && err.message? err.message : '0') ));
    document.body.appendChild(m);
  }
})();
</script>
</body>
</html>


